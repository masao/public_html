#-*-CPerl-*-
### ユーザ設定項目 ###

# --------------------------------------------------------------------
# コメントログファイルを置くディレクトリ
$log_dir = "kblog";

# --------------------------------------------------------------------
# 管理者用ログファイル
$admin_log_file = "kblog/log.txt";

# --------------------------------------------------------------------
# 管理者用パスワード: 空だと編集・削除ができません。
$passwd = "";

# --------------------------------------------------------------------
# 最新投稿表示のときに一度に表示する数
$latest_comment_display_num = 50;

# --------------------------------------------------------------------
# 表示するコメントの数 for JavaScript
$kb_js_display_max = 5;

# --------------------------------------------------------------------
# 1 コメントが表示される文字数 for JavaScript
$kb_js_strlen_max = 40;

# --------------------------------------------------------------------
# デフォルトの投稿者名
$noname = "名無しさん";

# --------------------------------------------------------------------
# 文字コード - このファイルの文字コードもこれにあわせて！
$charset = "EUC-JP";

# --------------------------------------------------------------------
# デフォルトページ (全コメント見る・コメント投稿) のテンプレート
$page_template_default = << 'PAGE'
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=$charset">
<link rel=stylesheet href="diary.css" media=all>
<title>Kuttuki BBS</title>
</head>
<body>

<p class="adminmenu"><a href="index.html">Index</a> / 
<a href="$cgi_url">Reload</a> / <a href="$cgi_url&mode=edit">Edit</a></p>

<h1>Comment on <a href="$target_url">$logid</a></h1>

<div class="day">

<div class="form">
<div class="caption"><a name="c">
<a href="$target_url">$logid</a> について、
コメントがあればどうぞ!
E-mail アドレスは公開されません。URL は公開されます。
<br>
なお、管理者の判断により予告なくコメントを削除することがあります。
ご了承下さい。
</a></div>
<form class="comment" method="post" action="./"><div>
<input type="hidden" name="mode" value="write">
<input type="hidden" name="id" value="$logid">
<div class="field name">
お名前:<input class="field" name="name" value="$name">
</div>
<div class="field mail">
E-mail or URL:<input class="field" name="mail" value="$mail_or_url">
</div>
<div class="textarea">
コメント:<textarea name="body" cols="60" rows="5"></textarea>
</div>
<div class="button">
<input type="submit" name="comment" value="投稿">
</div>
</div>
</form>
</div>

<div class="comment">
<div class="commentbody">
$comments
</div>
</div>
</div>

<div align="right">Powered by 
<a href="http://nais.to/~yto/tools/kuttukibbs/"><b>くっつき BBS</b></a></div>

</body>
</html>
PAGE
    ;

# --------------------------------------------------------------------
# 最新投稿表示ページのテンプレート
$page_template_latest = << 'LATEST'
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=$charset">
<link rel=stylesheet href="diary.css" media=all>
<title>Kuttuki BBS</title>
</head>
<body>

<p class="adminmenu"><a href="index.html">Index</a> / 
<a href="$cgi_url">Reload</a></p>

<h1>Latest Comments $latest_comment_display_num</h1>

<div class="day">
<div class="comment">
<div class="commentbody">
$comments
</div>
</div>
</div>

<div align="right">Powered by 
<a href="http://nais.to/~yto/tools/kuttukibbs/"><b>くっつき BBS</b></a></div>

</body>
</html>
LATEST
    ;

# --------------------------------------------------------------------
# 編集ページのテンプレート
$page_template_edit = << 'EDIT'
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=$charset">
<title>Kuttuki BBS</title>
</head>
<body>
<h1>Edit Comment on <a href="$target_url">$logid</a></h1>
<form class="comment" method="post" action="kuttukibbs.cgi">
<input type="hidden" name="mode" value="edit">
<input type="hidden" name="id" value="$logid">
<textarea name="content" cols="60" rows="10">$content</textarea>
<br>
<input type="submit" name="comment" value="OK">
<input type="password" name="passwd" value=""> (password)
</form>
</body>
</html>
EDIT
    ;


# --------------------------------------------------------------------
# ID を URL に変換する

sub id2url {
    my ($id) = @_;		# Ex. 2004-01-01 -> 2004-01-01.html
    my ($y, $m, $d) = $id =~ m/^(\d\d\d\d)-?(\d\d)-?(\d\d)$/o;
    return "http://masao.jpn.org/d/$y-$m-$d.html" if defined $y and defined $m and defined $d
}

#  sub id2url {
#      my ($ID) = @_;		# Ex. 2004-01-01 -> 2004-01.html#2004-01-01
#      my ($ym) = ($ID =~ /^(\d+-\d+)-/);
#      return "http://nais.to/~yto/clog/$ym.html#$ID";
#  }

#  sub id2url {
#      my ($ID) = @_;		# 1 -> doc/001.html, 2 -> doc/002.html
#      my $str = sprintf "doc/%03d.html", $ID;
#      return "http://nais.to/~yto/clog/$str";
#  }

#  sub id2url {
#      my ($ID) = @_;		# abc -> clog/, xyz -> about.html
#      my %hash = (abc => 'clog/', xyz => 'about.html');
#      return "http://nais.to/~yto/$hash{$ID}";
#  }

