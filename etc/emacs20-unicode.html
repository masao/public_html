<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
<link rel="stylesheet" href="../default.css" type="text/css">
<link rev="made" href="mailto:masao@ulis.ac.jp">
<title>Emacs20でUnicodeを使おう!</title>
</head>

<body>
<h1>Emacs20でUnicodeを使おう!</h1>
<p>
このページでは、GNU Emacs20でUnicodeテキストを扱う方法について述べます。
</p>
<p>
まず、Emacs20は標準ではUnicodeをサポートしていません。
そこで、Mule-UCSと呼ばれるUnicodeエンコーディングに
対応させるためのパッチを導入する必要があります。
</p>
<p>
ちなみに、Emacsのバージョンが19.XXベースのMuleの場合は、
ここで述べる方法をとることはできません。
素直に(?)Emacs20にバージョンを上げましょう。
</p>
<h2>導入の手順</h2>
<p>
導入に必要なファイル群は以下のURLなどから入手してください。
</p>
<ul>
  <li><a href="ftp://ftp.m17n.org/pub/mule/">ftp://ftp.m17n.org/pub/mule/</a><a href="ftp://ftp.m17n.org/pub/mule/emacs-20.7.tar.gz">emacs-20.7.tar.gz</a>
  <li><a href="ftp://ftp.m17n.org/pub/mule/">ftp://ftp.m17n.org/pub/mule/</a><a href="ftp://ftp.m17n.org/pub/mule/leim-20.7.tar.gz">leim-20.7.tar.gz</a>
  <li><a href="ftp://ftp.m17n.org/pub/mule/Mule-UCS/">ftp://ftp.m17n.org/pub/mule/Mule-UCS/</a><a href="ftp://ftp.m17n.org/pub/mule/Mule-UCS/Mule-UCS-0.84.tar.gz">Mule-UCS-0.84.tar.gz</a>
</ul>
<p>
以下に、導入の手順を示します。
</p>
<pre>
	(ファイルの展開)
% tar zxvf ~/src/emacs-20.7.tar.gz
% tar zxvf ~/src/leim-20.7.tar.gz
% tar zxvf ~/src/Mule-UCS-0.84.tar.gz

	(パッチをあてる)
% cd emacs-20.7
% patch -p1 &lt; ../Mule-UCS-0.84/emacs-20.7-mule-4.1.patch.txt

	(コンパイルとインストール)
% ./configure
% make
% su
Password: ******
# make install

	(Mule-UCSパッケージの導入)
% cd ../Mule-UCS-0.84
% emacs -q --no-site-file -batch -l mucs-comp.el
% su
Password: ******
# mkdir ${prefix}/share/emacs/site-lisp/Mule-UCS
# cp -r lisp/* ${prefix}/share/emacs/site-lisp/Mule-UCS
</pre>
<h2>設定</h2>
<p>
導入がうまくいったら、次に個人環境の設定をおこないます。
Mule-UCSを利用するには、
以下の設定を<code>~/.emacs</code>に追加するだけでOKです。
(既存のEmacs19用の設定と使い分けるためには<code>~/.emacs</code>をいじらず、
<code>~/.emacs.el</code>の方にEmacs20用の設定を書くという方法もあります)
</p>
<pre>
(require 'un-define)
</pre>
<p>
また、Xサーバの方にUnicodeが表示できるフォントを用意してあげないと、
□で表示されてしまいます。
これに対処するには、Emacs向けに開発された
Unicode対応フォントパッケージintlfontsをインストールする必要があります。
</p>

<h2>使い方</h2>
<p>
設定がうまくなされていれば、Emacsから
utf-8などUnicodeベースのエンコーディングのファイルを開くと
適切にエンコーディングの解釈がおこなわれて
Unicodeテキストの表示や編集ができるようになります。
</p>
<p>
まず、編集中のバッファの文字コードを変更する方法には、
<code>C-x [RETURN] f</code>と打ちこんで、
バッファの文字エンコーディングを尋ねられたら、
<code>utf-8</code>などと打ち込めばOKです。
</p>
<p>
また、一般のIMEなどから入力できない文字については、
Unicodeのコード番号から入力することができるようです。
例えば、U+FA19にあたる文字（&#xfa19;: 「神」の旧字体です）を入力する場合、
<code>M-x insert-ucs-character [RETURN]</code>としてから
<code>?\xFA19</code>と打ちこむと、
その文字が入力されます。
</p>

<hr>
<h2>関連URL</h2>
<ul>
  <li><a href="http://www.gnu.org/software/emacs/">GNU Emacs</a>:
      本家のサイトです。
      (Emacs21も出てます…)

  <li><a href="http://www.unicode.org/">Unicode Consortium</a>:
      Unicode情報の拠点です。

  <li><a href="http://www.cl.cam.ac.uk/~mgk25/unicode.html">UTF-8 and Unicode FAQ for Linux</a>:
      実際にUnicodeを扱う環境としての Unix, Linux についての情報が満載。
      (Mule-UCSについてはココで知りました)

</ul>
<hr>
<address>
高久雅生 (Takaku Masao)<br>
<a href="http://nile.ulis.ac.jp/~masao/">http://nile.ulis.ac.jp/~masao/</a>, 
<a href="mailto:masao@ulis.ac.jp">masao@ulis.ac.jp</a>
</address>
<div class="id">$Id$</div>
</body>
</html>
