<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
<link rel="stylesheet" href="../../default.css" type="text/css">
<link rev="made" href="mailto:masao@nii.ac.jp">
<title>Graphviz-ja</title>
</head>
<body>
<!-- hhmts start -->
<div class="last-update">最終更新日: <strong>Sat Oct 13 07:32:47 2001</strong></div>
<!-- hhmts end -->
<hr>
<h1>Graphviz-ja</h1>
<h2>目次</h2>
<ul>
  <li><a href="#overview">概要</a>
  <li><a href="#usage">使い方</a>
  <li><a href="#example">描画例</a>
  <li><a href="#download">ダウンロード</a>
  <li><a href="#history">更新履歴</a>
  <li><a href="#reference">参考URL</a>
</ul>
<hr>
<h2><a name="overview">概要</a></h2>
<p>
<a href="http://www.research.att.com/sw/tools/graphviz/">Graphviz</a>はグラフ構造の整形、描画、編集システムです。
</p>
<p>
現在、まったく日本語などのASCII以外の言語コードに対応していないので、
とりあえず、日本語は通したいなぁと思ってパッチを作ってみました。
</p>
<p>
このパッチをあてることにより、
日本語EUC-JPコードの混じった dot 形式のファイルを
GDライブラリを経由した画像形式 GIF, PNG, JPEGなどで
出力できるようになります。
（ただし、フォントファイルとして、
watanabe-mincho.ttf や wadalab-gothic.ttf など
が必要になります。）
</p>
<p>
（動作確認は RedHat Linux 6.1J の上でのみ行っています。）
</p>
<p>
<strong>出来ないこと：</strong>
</p>
<ul>
  <li>PostscriptやPDFなどの日本語出力は未対応です。
  <li>韓国語、中国語などの表示は未確認です。
</ul>
<p><strong>パッチの問題点：</strong></p>
<ul>
  <li>フォントファイルは問答無用で、
      watanabe-mincho.ttf か wadalab-gothic.ttf
      を使うようになります。
      Boldとかイタリックとかの dot での指定は効かないと思う（多分）。
</ul>

<h2><a name="usage">使い方</a></h2>
<p>
まず、日本語用パッチのあたった Graphviz をインストールします。
</p>
<pre>
  % tar zxvf graphviz-1.7.9.tar.gz
  % cd graphviz-1.7.9
  % patch -p1 &lt; ../graphviz-1.7.9-ja0.patch
  % ./configure
  % make
  % su
  # make install
</pre>
<p>
さらに、日本語のTrueTypeフォントファイルが必要です。
（例えば、
<code>/usr/X11R6/lib/fonts/TruType/watanabe-mincho.ttf</code>
ファイルがあることを確認してください。）
</p>
<p>
日本語入りの dot ファイルを処理できます。
例えば、<code><a href="ff9.dot">ff9.dot</a></code>みたいの。
また、文字コードは EUC-JP であることを確認してください。
コマンドラインから、次のようなコマンドを打ち込むと、
GIF ファイルが生成されます。
（<code>-Tオプション</code>を変更すれば、JPEG や PNG 形式も生成できます。）
</p>
<pre>
  % dot -Tgif ff9.dot &gt; ff9.gif
</pre>
<p>
上記のGIFファイルで日本語の部分が文字化けしている場合は、
日本語フォントが見つからない場合だと思います。
この場合、<code>watanabe-mincho.ttf</code>を
<code>${HOME}/share/fonts</code>などに置いて
<code>DOTFONTPATH</code>環境変数をそのディレクトリに設定してから
dot コマンドを実行すると日本語フォント入りの画像ファイルを生成できます。
</p>

<h2><a name="example">描画例</a></h2>
<ul>
  <li><a href="ff9.png">PNG画像</a>, <a href="ff9.dot">ソース</a>:  元となるデータは<a href="http://ff-11.com/9ff/9ff.html">９−ＦＦいっしょにＴＡＬＫ！</a>から抽出したものです。
  <li><a href="info.png">PNG画像</a>, <a href="info.dot">ソース</a>: 元となるデータは<a href="http://www.ulis.ac.jp/~chinatsu/">伊東千夏さん</a>からいただいたものです。
</ul>

<h2><a name="download">ダウンロード</a></h2>
<ul>
  <li><a href="../archive/graphviz-1.7.9-ja0.patch">graphviz-1.7.9-ja0.patch</a> (2001-10-09 公開)<br>
      主な変更点は、
      <ul>
	<li>ラベル幅の計算をEUC-JPに対応させた。
	<li>GDライブラリのフォント探索を優先させるようにした。
	<li>IMAP生成用フィルタのフォント幅計算のバグ修正。
      </ul>
      です。
</ul>
<h2><a name="history">更新履歴</a></h2>
<dl>
  <dt>2001-10-11
  <dd><code>graphviz-1.7.9-ja0.patch</code>を公開しました。
  <dd>URLをすこし変更しました。
  <dt>2000-11-10
  <dd><code>graphviz-1.7-ja0.patch</code>を公開しました。
  <dd>初期公開版。
</dl>

<h2><a name="reference">参考URL</a></h2>
<ul>
  <li><a href="http://www.research.att.com/sw/tools/graphviz/">Graphviz</a>: 本家サイト （ドキュメントなど）
  <li><a href="http://www.graphviz.org/">Welcome to GraphViz</a>: 開発者向けサイト（CVSレポジトリなど）
  <li><a href="http://www.research.att.com/~john/Grappa/">Grappa</a>: グラフ描画エンジンのJava実装。
  <li><a href="http://ma2tak.dyndns.org:8888/ma2tak/974">GraphVizで日本語を使いたい</a>: 似たようなことを考えていた方がいました。
</ul>
<hr>
<address>
高久雅生 (Takaku Masao)<br>
<a href="http://nile.ulis.ac.jp/~masao/">http://nile.ulis.ac.jp/~masao/</a>, 
<a href="mailto:masao@nii.ac.jp">masao@nii.ac.jp</a>
</address>
<div class="id">$Id$</div>
</body>
</html>
