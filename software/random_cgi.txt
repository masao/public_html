#!/opt/free/bin/perl -w

use strict;

main();
sub main {
    open(PASSWD, "/etc/passwd") || die "open fail: $!";
    my @tmp = <PASSWD>;
    close(PASSWD);

    srand;
    my $user = undef;
    while (1) {
	$user = $tmp[int(rand($#tmp))];
	my @entry = split(/:/, $user);
	$user = $entry[0];
	my $dir = "$entry[5]/public_html";
	last if (-d $dir && -f "$dir/on-people-page");
	#(-f "$dir/index.html" || -f "$dir/index.shtml" || -f "$dir/index.cgi")
    }
    print "Location: http://www.ulis.ac.jp/~$user/\n\n";
}
